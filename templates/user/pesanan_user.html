{% extends 'base.html' %} {% block content %}
<div class="container mt-5">
  <div class="card border-0 shadow-sm p-4">
    <h3 class="mb-4 text-primary fw-bold">
      <i class="bi bi-cart-check"></i> Pesanan Saya
    </h3>

    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Paket</th>
            <th>Harga</th>
            <th>Status</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          {% for p in pesanan %}
          <tr>
            <td>{{ p.tgl_wisata.strftime('%d/%m/%Y') }}</td>
            <td>{{ p.nama_paket }}</td>
            <td>Rp {{ "{:,.0f}".format(p.harga) }}</td>
            <td>
              <span
                class="badge {% if p.status == 'Dibatalkan' %}bg-danger{% elif p.status == 'Pending' %}bg-warning text-dark{% else %}bg-success{% endif %}"
              >
                {{ p.status }}
              </span>
            </td>
            <td>
              {% if p.status == 'Pending' %}
              <a
                href="{{ url_for('batal_pesanan', id=p.id) }}"
                class="btn btn-sm btn-outline-danger"
                onclick="return confirm('Apakah Anda yakin ingin membatalkan pesanan ini?')"
              >
                Batalkan Pesanan
              </a>
              {% else %}
              <span class="text-muted small">-</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <a
        href="{{ url_for('user_dashboard') }}"
        class="btn btn-outline-primary btn-sm"
        >Kembali Jelajah Paket</a
      >
    </div>
  </div>
</div>
{% endblock %}
